var Client=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"geoNames",(function(){return o})),n.d(t,"weatherBit",(function(){return r})),n.d(t,"pixaBay",(function(){return a})),n.d(t,"submit",(function(){return d})),n.d(t,"postReq",(function(){return p})),n.d(t,"updateUi",(function(){return h}));var o=async e=>{const t=document.querySelector("#place").value;await fetch("http://api.geonames.org/searchJSON?formatted=true&q="+t+"&username=mohammedkhaled").then(e=>e.json()).then(t=>{e.city=t.geonames[0].name,e.country=t.geonames[0].countryName,e.lat=t.geonames[0].lat,e.lng=t.geonames[0].lng,console.log(e),Client.postReq("http://localhost:8080/addCity",e)})};var r=async e=>{const t="lat="+e.lat,n="&lon="+e.lng;await fetch("https://api.weatherbit.io/v2.0/current?"+t+n+"&key=d0f5c1f734b046ab967782d301218719").then(e=>e.json()).then(t=>{e={weather:t.data[0].weather.description},console.log(e),Client.postReq("http://localhost:8080/addWeather",e)})};var a=async e=>{e.country;await fetch("http://localhost:8080/result").then(e=>e.json()).then(async t=>{console.log(t);const n=t.city;await fetch("https://pixabay.com/api/?image_type=photo&category=places&q="+n+"&key=16029583-bf5e5ed8613792b6ce8c7ce12").then(e=>e.json()).then(async t=>{e.picture=t.hits[0].webformatURL,console.log(e),await Client.postReq("http://localhost:8080/addPicture",e)})})};const c={},i=document.querySelector("#loading"),l=document.querySelector("#description"),u=document.querySelector("#result"),s=document.querySelector("#place"),y=document.querySelector("#alert");var d=async e=>{e.preventDefault(),""===s.value?y.style.opacity=1:(i.style.display="block",i.style.opacity=1,y.style.opacity=0,s.style.width=s.value.length+1+"vw",l.style.opacity=0,await Client.geoNames(c),await Client.weatherBit(c),await Client.pixaBay(c),await Client.updateUi(),l.style.display="none",u.style.opacity=1,i.style.opacity=0,i.style.display="none")};var p=async(e,t)=>{await fetch(e,{method:"POST",credentials:"same-origin",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>{try{e.json()}catch(e){console.error("oh :(, ",e)}})};var h=async()=>{const e=document.querySelector("#location"),t=document.querySelector("#weather"),n=document.querySelector("#picture");await fetch("http://localhost:8080/result").then(e=>e.json()).then(o=>{e.textContent=`My trip to: ${o.city}, ${o.country}`,t.textContent="Weather: "+o.weather,n.setAttribute("src",""),n.setAttribute("src",o.picture)})};n(0),n(1),n(2);const f=document.querySelector("#submit"),m=document.querySelector("#white");f.addEventListener("click",d),window.addEventListener("load",()=>{setTimeout(()=>{m.style.display="none"},2e3)}),window.addEventListener("keydown",e=>{13===e.code&&d()})}]);